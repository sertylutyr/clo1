<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–≥—Ä—É–∑–∫–∞...</title>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(101122135, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/101122135" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    <style>
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
            color: #333;
        }
        .loader-container {
            text-align: center;
            max-width: 80%;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loading-text {
            font-size: 18px;
            color: #333;
        }
        #debug-info {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            max-width: 90%;
            max-height: 200px;
            overflow-y: auto;
            font-size: 12px;
            display: none;
        }
        /* –°–∫—Ä—ã—Ç–∞—è —Å—Å—ã–ª–∫–∞-–ª–æ–≤—É—à–∫–∞ –¥–ª—è –±–æ—Ç–æ–≤ */
        .bot-trap {
            position: absolute;
            opacity: 0;
            height: 1px;
            width: 1px;
            overflow: hidden;
            clip: rect(1px, 1px, 1px, 1px);
            pointer-events: none; /* –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */
        }
        /* –î–ª—è –±–æ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç CSS */
        .bot-trap-link {
            position: absolute;
            top: -9999px;
            left: -9999px;
            font-size: 1px;
            color: transparent;
        }
        @media (max-width: 768px) {
            .loader {
                width: 40px;
                height: 40px;
            }
            .loading-text {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="loader-container">
        <div class="loader"></div>
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ... –ï—Å–ª–∏ –≤—ã —Å –ü–ö, –ø–æ—à–µ–≤–µ–ª–∏—Ç–µ –∫—É—Ä—Å–æ—Ä–æ–º.</div>
    </div>
    
    <!-- –°–∫—Ä—ã—Ç–∞—è —Å—Å—ã–ª–∫–∞-–ª–æ–≤—É—à–∫–∞ –¥–ª—è –±–æ—Ç–æ–≤ -->
    <div class="bot-trap" aria-hidden="true">
        <a href="https://dzen.ru" class="bot-trap-link" tabindex="-1">—Å–∫—Ä—ã—Ç–∞—è —Å—Å—ã–ª–∫–∞</a>
    </div>
    
    <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
    <div id="debug-info"></div>

    <script>
        // –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ true –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
        const DEBUG_MODE = false;
        
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è URL —Å—Ç—Ä–∞–Ω–∏—Ü
        const WHITE_PAGE = 'https://dzen.ru';     // –î–ª—è –±–æ—Ç–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
        const BLACK_PAGE = 'https://google.com';  // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
        
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è Telegram-–±–æ—Ç–∞
        const TELEGRAM_BOT_TOKEN = '7853695428:AAFhxiIHq67-UOQbP7bJ4FrH0EmwtWGswNU';
        const TELEGRAM_CHAT_ID = '1237450939';
        
        // –ú–µ—Ç–∫–∞ –Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–Ω–Ω–µ–≥–æ —É—Ö–æ–¥–∞
        const PAGE_LOAD_START = Date.now();
        let pageFullyLoaded = false;
        
        // –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–ª–∏–∫–æ–≤ –ø–æ –ª–æ–≤—É—à–∫–µ
        let botTrapActivated = false;
        
        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ –¥–ª—è –ü–ö-—É—Å—Ç—Ä–æ–π—Å—Ç–≤
        let hadMouseMovement = false;
        
        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π
        let visitCount = 0;
        try {
            visitCount = parseInt(localStorage.getItem('total_visits') || '0', 10);
            localStorage.setItem('total_visits', (visitCount + 1).toString());
        } catch (e) {
            console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥—Å—á–µ—Ç–µ –ø–æ—Å–µ—â–µ–Ω–∏–π:', e);
        }
        
        // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–≤—É –¥–ª—è fingerprinting
        const getCanvasFingerprint = () => {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 200;
                canvas.height = 50;
                
                // –†–∏—Å—É–µ–º —Ç–µ–∫—Å—Ç —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
                const txt = 'Canvas Fingerprint';
                ctx.textBaseline = "top";
                ctx.font = "14px 'Arial'";
                ctx.fillStyle = "#f60";
                ctx.fillRect(125, 1, 62, 20);
                ctx.fillStyle = "#069";
                ctx.fillText(txt, 2, 15);
                ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
                ctx.fillText(txt, 4, 17);
                
                return canvas.toDataURL().replace('data:image/png;base64,', '').substring(0, 30) + '...';
            } catch (e) {
                return 'Canvas –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è';
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        function isMobileDevice() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ User-Agent
            const mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i;
            const userAgent = navigator.userAgent;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–∞–ª–∏—á–∏—é touch-—Å–æ–±—ã—Ç–∏–π
            const hasTouchEvents = 'ontouchstart' in window || 
                                  navigator.maxTouchPoints > 0 || 
                                  navigator.msMaxTouchPoints > 0;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞ (—Ç–∏–ø–∏—á–Ω–æ–≥–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)
            const smallScreen = window.innerWidth <= 800 || window.innerHeight <= 600;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö API
            const hasMobileAPI = ('orientation' in window) || ('DeviceOrientationEvent' in window);
            
            // –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ñ–∞–∫—Ç–æ—Ä–∞–º –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –æ—à–∏–±–∫–∏
            const isMobile = mobileRegex.test(userAgent) || 
                            (hasTouchEvents && smallScreen) ||
                            (hasMobileAPI && hasTouchEvents);
            
            debugLog(`–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: ${isMobile ? '–ú–æ–±–∏–ª—å–Ω–æ–µ' : '–î–µ—Å–∫—Ç–æ–ø'}`);
            
            return isMobile;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
        function debugLog(message) {
            console.log(message);
            if (DEBUG_MODE) {
                const debugElement = document.getElementById('debug-info');
                debugElement.style.display = 'block';
                debugElement.innerHTML += message + '<br>';
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
                debugElement.scrollTop = debugElement.scrollHeight;
            }
        }
        
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ User-Agent –±–æ—Ç–æ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Ö–≤–∞—Ç–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
        const SEARCH_BOT_AGENTS = [
            // –Ø–Ω–¥–µ–∫—Å –±–æ—Ç—ã
            /YandexBot/i, /YandexAccessibilityBot/i, /YandexMobileBot/i, /YandexDirectDyn/i,
            /YandexImages/i, /YandexVideo/i, /YandexVideoParser/i, /YandexMedia/i,
            /YandexBlogs/i, /YandexFavicons/i, /YandexWebmaster/i, /YandexPagechecker/i,
            /YandexImageResizer/i, /YaDirectFetcher/i, /YandexCalendar/i, /YandexSitelinks/i,
            /YandexMetrika/i, /YandexNews/i, /YandexCatalog/i, /YandexMarket/i,
            /YandexVerticals/i, /YandexVertis/i, /YandexSearchShop/i, /YandexOntoDB/i,
            /YandexOntoDBAPI/i, /YandexRCA/i, /YandexSpravBot/i, /YandexScreenshotBot/i,
            /YandexMobileScreenShotBot/i, /YandexAdNet/i, /YandexDirect/i, /YandexTurbo/i,
            /YandexRenderResourcesBot/i, /YandexTracker/i, /YandexPartner/i, /YandexComBot/i,
            /YandexUserproxy/i, /YandexAdditionalBot/i, /YandexDialogs/i, /MirrorDetector/i,
            /YandexAdditional/i,
            
            // Google –±–æ—Ç—ã
            /Googlebot/i, /AdsBot-Google/i, /Google-Read-Aloud/i, /DuplexWeb-Google/i,
            /Google Favicon/i, /googleweblight/i, /Storebot-Google/i, /Google-PageRenderer/i,
            /Google-Site-Verification/i, /Google-SearchByImage/i, /GoogleAccessibilityTest/i,
            /GoogleProducer/i, /APIs-Google/i, /Google-Adwords-Instant/i, /FeedFetcher-Google/i,
            /Google-Apps-Script/i,
            
            // Microsoft/Bing –±–æ—Ç—ã
            /bingbot/i, /msnbot/i, /BingPreview/i, /AdIdxBot/i, /MicrosoftPreview/i, /MicrosoftSearch/i,
            
            // –î—Ä—É–≥–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã
            /slurp/i, /duckduckbot/i, /baiduspider/i, /Yahoo! Slurp/i, /YahooSeeker/i,
            /Exabot/i, /facebookexternalhit/i, /ia_archiver/i, /WhatsApp/i,
            /Applebot/i, /archive.org_bot/i, /BuiltWith/i, /Bot.AraTear/i, /BUbiNG/i,
            /Chrome-Lighthouse/i, /Clickagy/i, /CliniqueBot/i, /DomainStatsBot/i, /evc-batch/i,
            
            // –û–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –±–æ—Ç–æ–≤
            /bot/i, /spider/i, /crawler/i, /scraper/i, /checker/i, /archiver/i, /validator/i,
            /fetcher/i, /parser/i, /reader/i, /indexer/i, /panscient/i, /monitoring/i,
            
            // SEO/–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
            /semrush/i, /ahrefs/i, /mj12bot/i, /majestic/i, /rogerbot/i, /dotbot/i,
            /screaming/i, /seokicks/i, /sistrix/i, /seobilitybot/i, /seoscanners/i,
            /proximic/i, /pingdom/i, /gtmetrix/i, /pagespeed/i, /webmeup/i, /Catchpoint/i,
            /Riddler/i, /Nessus/i, /datasift/i, /BLEXBot/i, /AspiegelBot/i, /ScoutJet/i,
            
            // –ù–æ–≤—ã–µ –±–æ—Ç—ã –∏–∑ 2023
            /bytespider/i, /petalbot/i, /DeepCrawl/i, /Sogou/i, /MojeekBot/i, /DuckDuckGo/i,
            /SeznamBot/i, /Mail.RU_Bot/i, /SemrushBot/i, /Qwantify/i, /CensysInspect/i,
            /PetalBot/i, /Cliqzbot/i, /QwantMobile/i, /coccocbot/i, /EarwigBot/i,
            /NetcraftSurveyAgent/i, /weborama-fetcher/i, /BrightSign/i, /Cookiebot/i,
            /DataForSeoBot/i
        ];
        
        // –î–æ–º–µ–Ω—ã –Ø–Ω–¥–µ–∫—Å–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ DNS
        const YANDEX_DOMAINS = [
            '.yandex.ru', '.yandex.net', '.yandex.com', '.yandex.by', '.yandex.kz', 
            '.yandex.ua', '.yandex.md', '.yandex.com.tr', '.yandex.com.am'
        ];
        
        // –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –Ø–Ω–¥–µ–∫—Å–∞
        const YANDEX_ASN = ['AS13238', 'AS208722'];
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
        async function collectUserInfo() {
            const info = {
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                language: navigator.language || navigator.userLanguage,
                platform: navigator.platform,
                deviceType: isMobileDevice() ? '–ú–æ–±–∏–ª—å–Ω–æ–µ' : '–î–µ—Å–∫—Ç–æ–ø',
                visitCount: visitCount,
                screenSize: `${window.screen.width}x${window.screen.height}`,
                windowSize: `${window.innerWidth}x${window.innerHeight}`,
                pixelRatio: window.devicePixelRatio || 'unknown',
                colorDepth: window.screen.colorDepth || 'unknown',
                referrer: document.referrer || 'none',
                url: window.location.href,
                cookies: navigator.cookieEnabled ? 'enabled' : 'disabled',
                localStorage: typeof localStorage !== 'undefined' ? 'available' : 'unavailable',
                plugins: navigator.plugins ? Array.from(navigator.plugins).map(p => p.name).slice(0, 5).join(', ') : 'unknown',
                cores: navigator.hardwareConcurrency || 'unknown',
                memory: navigator.deviceMemory ? `${navigator.deviceMemory}GB` : 'unknown',
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || 'unknown',
                connection: navigator.connection ? 
                    `${navigator.connection.effectiveType || 'unknown'} (RTT: ${navigator.connection.rtt || 'unknown'})` : 'unknown',
                webdriver: navigator.webdriver ? 'yes' : 'no',
                languages: Array.isArray(navigator.languages) ? navigator.languages.join(', ') : 'unknown',
                doNotTrack: navigator.doNotTrack || 'unknown',
                battery: 'checking...',
                canvasFingerprint: getCanvasFingerprint(),
                hadMouseMovement: hadMouseMovement ? 'yes' : 'no',
                ip: 'pending...',
                location: 'pending...',
                botTrapInteracted: botTrapActivated ? '–î–ê! (–õ–æ–≤—É—à–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞)' : '–Ω–µ—Ç',
                pageLoadTime: (Date.now() - PAGE_LOAD_START) + '–º—Å'
            };
            
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞—Ç–∞—Ä–µ–µ
            try {
                if ('getBattery' in navigator) {
                    const battery = await navigator.getBattery();
                    info.battery = `–ó–∞—Ä—è–¥: ${Math.round(battery.level * 100)}%, –ó–∞—Ä—è–∂–∞–µ—Ç—Å—è: ${battery.charging ? '–¥–∞' : '–Ω–µ—Ç'}`;
                }
            } catch (e) {
                info.battery = '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è';
            }
            
            // –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å IP-–∞–¥—Ä–µ—Å –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
            try {
                const ipServices = [
                    'https://api.ipify.org?format=json',
                    'https://ipinfo.io/json',
                    'https://api.myip.com',
                    'https://ipapi.co/json/'
                ];
                
                for (const service of ipServices) {
                    try {
                        const response = await fetch(service);
                        if (response.ok) {
                            const data = await response.json();
                            info.ip = data.ip || data.myip || 'unknown';
                            
                            // –§–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
                            const locationParts = [];
                            if (data.country) locationParts.push(data.country);
                            if (data.city) locationParts.push(data.city);
                            
                            if (locationParts.length > 0) {
                                info.location = locationParts.join(', ');
                            } else {
                                info.location = '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ';
                            }
                            
                            // –ë–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã, –µ—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ
                            break;
                        }
                    } catch (e) {
                        continue;
                    }
                }
            } catch (e) {
                info.ip = 'failed to detect';
                info.location = '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ';
            }
            
            return info;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞ –≤ Telegram (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
        async function sendTelegramReport(blockReason, userInfo) {
            try {
                // –§–æ—Ä–º–∏—Ä—É–µ–º —ç–º–æ–¥–∑–∏ —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                const blockEmoji = userInfo.botTrapInteracted ? 'ü™§ *–ö–õ–û–ê–ö–ê: –õ–û–í–£–®–ö–ê –°–†–ê–ë–û–¢–ê–õ–ê*' : 'üö´ *–ö–õ–û–ê–ö–ê: –ë–õ–û–ö–ò–†–û–í–ö–ê*';
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–º–æ–¥–∑–∏ –∏ —Ä–∞–∑–º–µ—Ç–∫–æ–π Markdown
                const message = `${blockEmoji}\n\n` +
                    `‚ö†Ô∏è *–ü—Ä–∏—á–∏–Ω–∞*: ${blockReason}\n\n` +
                    `üì± *–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞*: ${userInfo.deviceType}\n` +
                    `üî¢ *–°—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π*: ${userInfo.visitCount}\n` +
                    `üåê *IP*: \`${userInfo.ip}\`\n` +
                    `üìç *–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è*: ${userInfo.location}\n` +
                    `üñ•Ô∏è *User-Agent*: \`${userInfo.userAgent}\`\n` +
                    `üìè *–≠–∫—Ä–∞–Ω*: ${userInfo.screenSize} (${userInfo.pixelRatio}x)\n` +
                    `‚è±Ô∏è *–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏*: ${userInfo.pageLoadTime}\n` +
                    `üîó *URL*: ${userInfo.url}\n` +
                    `‚Ü©Ô∏è *Referrer*: ${userInfo.referrer}\n\n` +
                    `üñ±Ô∏è *–î–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏*: ${userInfo.hadMouseMovement}\n` +
                    `üîã *–ë–∞—Ç–∞—Ä–µ—è*: ${userInfo.battery}\n` +
                    `üß† *–Ø–¥—Ä–∞ CPU*: ${userInfo.cores}\n` +
                    `üíæ *–ü–∞–º—è—Ç—å*: ${userInfo.memory}\n` +
                    `üåç *–Ø–∑—ã–∫*: ${userInfo.language}\n` +
                    `‚è∞ *–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å*: ${userInfo.timezone}\n` +
                    `üîå *–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ*: ${userInfo.connection}\n` +
                    `ü§ñ *WebDriver*: ${userInfo.webdriver}\n` +
                    `üé® *Canvas*: ${userInfo.canvasFingerprint}`;
                
                // –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ URL-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                const encodedMessage = encodeURIComponent(message);
                const telegramUrl = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodedMessage}&parse_mode=Markdown`;
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ Telegram API
                const response = await fetch(telegramUrl);
                const data = await response.json();
                
                if (data.ok) {
                    debugLog(`‚úÖ –û—Ç—á–µ—Ç –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram`);
                } else {
                    debugLog(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á–µ—Ç–∞ –≤ Telegram: ${data.description}`);
                    
                    // –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–µ–∑ —Ä–∞–∑–º–µ—Ç–∫–∏, –µ—Å–ª–∏ –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
                    if (data.description && data.description.includes("can't parse entities")) {
                        const plainMessage = message.replace(/\*/g, '').replace(/`/g, '');
                        const encodedPlainMessage = encodeURIComponent(plainMessage);
                        const backupUrl = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodedPlainMessage}`;
                        
                        try {
                            const backupResponse = await fetch(backupUrl);
                            const backupData = await backupResponse.json();
                            if (backupData.ok) {
                                debugLog(`‚úÖ –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è`);
                            }
                        } catch (e) {
                            debugLog(`‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–∂–µ –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${e.message}`);
                        }
                    }
                }
            } catch (error) {
                debugLog(`‚ùå –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á–µ—Ç–∞ –≤ Telegram: ${error.message}`);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }
        
        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º XMLHttpRequest
        function loadFile(filename) {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest();
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
                const nocacheParam = `nocache=${new Date().getTime()}`;
                xhr.open('GET', `${filename}?${nocacheParam}`, true);
                xhr.responseType = 'text';
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç
                xhr.timeout = 5000;
                
                xhr.onload = function() {
                    if (xhr.status === 200) {
                        debugLog(`–§–∞–π–ª ${filename} —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω`);
                        resolve(xhr.responseText);
                    } else {
                        debugLog(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ ${filename}: HTTP —Å—Ç–∞—Ç—É—Å ${xhr.status}`);
                        reject(new Error(`HTTP —Å—Ç–∞—Ç—É—Å ${xhr.status}`));
                    }
                };
                
                xhr.ontimeout = function() {
                    debugLog(`–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ ${filename}`);
                    reject(new Error('Timeout'));
                };
                
                xhr.onerror = function() {
                    debugLog(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ ${filename}`);
                    reject(new Error('Network Error'));
                };
                
                xhr.send();
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–ª–µ–≤–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏ —Ñ–∞–π–ª–∞ links.txt
        async function getTargetLinkFromFile() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ –∏–∑ URL
                const linkCode = getUrlParameter('code');
                
                // –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º BLACK_PAGE –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                if (!linkCode) {
                    debugLog('–ü–∞—Ä–∞–º–µ—Ç—Ä code –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º BLACK_PAGE –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
                    return BLACK_PAGE;
                }
                
                // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª links.txt
                let linksText;
                try {
                    linksText = await loadFile('links.txt');
                } catch (error) {
                    debugLog(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å links.txt: ${error.message}`);
                    return BLACK_PAGE;
                }
                
                // –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
                const links = linksText.split('\n')
                    .map(link => link.trim())
                    .filter(link => link && link.length > 0);
                
                debugLog(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${links.length} —Å—Å—ã–ª–æ–∫ –∏–∑ —Ñ–∞–π–ª–∞ links.txt`);
                
                // –ï—Å–ª–∏ —Ñ–∞–π–ª –ø—É—Å—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º BLACK_PAGE
                if (links.length === 0) {
                    debugLog('–§–∞–π–ª links.txt –ø—É—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º BLACK_PAGE –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
                    return BLACK_PAGE;
                }
                
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º code –≤ —á–∏—Å–ª–æ
                const codeNumber = parseInt(linkCode, 10);
                
                // –ï—Å–ª–∏ code –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º BLACK_PAGE
                if (isNaN(codeNumber) || codeNumber < 1) {
                    debugLog('–ü–∞—Ä–∞–º–µ—Ç—Ä code –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º BLACK_PAGE –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
                    return BLACK_PAGE;
                }
                
                // –ï—Å–ª–∏ code –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫, –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Å—Å—ã–ª–∫—É
                if (codeNumber > links.length) {
                    const randomIndex = Math.floor(Math.random() * links.length);
                    const randomLink = links[randomIndex];
                    debugLog(`–ü–∞—Ä–∞–º–µ—Ç—Ä code (${codeNumber}) –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (${links.length}), –≤—ã–±—Ä–∞–Ω–∞ —Å–ª—É—á–∞–π–Ω–∞—è —Å—Å—ã–ª–∫–∞: ${randomLink}`);
                    return randomLink;
                }
                
                // –ò–Ω–∞—á–µ –≤—ã–±–∏—Ä–∞–µ–º —Å—Å—ã–ª–∫—É –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É (—Å –ø–æ–ø—Ä–∞–≤–∫–æ–π –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é —Å 0)
                const selectedLink = links[codeNumber - 1];
                debugLog(`–í—ã–±—Ä–∞–Ω–∞ —Å—Å—ã–ª–∫–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É ${codeNumber}: ${selectedLink}`);
                return selectedLink;
                
            } catch (error) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ü–µ–ª–µ–≤–æ–π —Å—Å—ã–ª–∫–∏: ${error.message}`);
                return BLACK_PAGE;
            }
        }
        
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –±–æ—Ç–æ–≤ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        function isSearchBot() {
            const userAgent = navigator.userAgent.toLowerCase();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –æ–±—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –±–æ—Ç–æ–≤
            for (let i = 0; i < SEARCH_BOT_AGENTS.length; i++) {
                if (SEARCH_BOT_AGENTS[i].test(userAgent)) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ–∏—Å–∫–æ–≤—ã–π –±–æ—Ç –≤ User-Agent: ${SEARCH_BOT_AGENTS[i]}`;
                }
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤:
            
            // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
            // (–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Å–≤–µ–Ω–Ω–æ)
            if (window.navigator && window.navigator.userAgentData && window.navigator.userAgentData.brands) {
                const brands = window.navigator.userAgentData.brands;
                const suspiciousBrands = ['Googlebot', 'GoogleOther', 'YandexBot', 'BingBot', 'BaiduBot'];
                
                for (const brand of brands) {
                    if (suspiciousBrands.includes(brand.brand)) {
                        return `–û–±–Ω–∞—Ä—É–∂–µ–Ω –±–æ—Ç –≤ userAgentData.brands: ${brand.brand}`;
                    }
                }
            }
            
            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö API –±—Ä–∞—É–∑–µ—Ä–∞
            if (typeof window.localStorage === 'undefined' || 
                typeof window.sessionStorage === 'undefined' || 
                typeof window.indexedDB === 'undefined') {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–µ–≤—ã—Ö API –±—Ä–∞—É–∑–µ—Ä–∞';
            }
            
            // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –±–æ—Ç–æ–≤
            if (window._phantom || 
                window.phantom || 
                window.callPhantom || 
                window.__phantomas || 
                window.Buffer || 
                window.spawn || 
                window.emit) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ–±—ä–µ–∫—Ç—ã headless/phantom –±—Ä–∞—É–∑–µ—Ä–∞';
            }
            
            return false;
        }
        
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è Headless –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
        function isHeadlessBrowser() {
            const isMobile = isMobileDevice();
            
            // –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ WebDriver –∏ PhantomJS
            if (navigator.webdriver) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω WebDriver';
            }
            
            if (window.callPhantom || window._phantom || window.phantom) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ–±—ä–µ–∫—Ç—ã PhantomJS';
            }
            
            if (window.__nightmare) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω Nightmare.js';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Puppeteer/Playwright
            const puppeteerObjects = [
                '__webdriver_evaluate', 
                '__webdriver_script_function', 
                '__webdriver_script_fn', 
                '__webdriver_script_func', 
                '__selenium_evaluate',
                '__selenium_unwrapped', 
                '__fxdriver_evaluate', 
                '__driver_unwrapped', 
                '__driver_evaluate', 
                '__selenium_unwrapped',
                '__fxdriver_unwrapped', 
                'domAutomation', 
                'domAutomationController', 
                '_WEBDRIVER_ELEM_CACHE'
            ];
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ Puppeteer/Playwright/Selenium –æ–±—ä–µ–∫—Ç–æ–≤
            for (const obj of puppeteerObjects) {
                if (obj in window || obj in document) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏: ${obj}`;
                }
            }
            
            // –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Selenium
            if (window.document.documentElement.getAttribute('webdriver') ||
                window.document.documentElement.getAttribute('selenium') ||
                window.document.documentElement.getAttribute('driver')) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∞—Ç—Ä–∏–±—É—Ç—ã Selenium';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Chromium Automation Extension
            if ('domAutomation' in window || 'domAutomationController' in window) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ Chromium';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞
            if (navigator.languages === undefined) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ navigator.languages';
            }
            
            // –¢–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ languages
            if (!isMobile && navigator.languages.length === 0) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ navigator.languages';
            }
            
            // –¢–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤
            if (!isMobile && navigator.plugins.length === 0) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Chrome –≤ Headless —Ä–µ–∂–∏–º–µ
            if ('chrome' in window && !window.chrome) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –æ–±—ä–µ–∫—Ç–µ chrome';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã Playwright
            if (window.playwright) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç playwright';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ Puppeteer
            if (window.puppeteer || 
                window._pptr || 
                window.__pptrCDPConnection || 
                window.__PUPPETEER__) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç puppeteer';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –±–æ—Ç–∞
                const e = document.createEvent('TouchEvent');
                return false;
            } catch (e) {
                // –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–∫–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç Puppeteer/Playwright
                const errorString = e.toString();
                if (errorString.includes('puppeteer') || 
                    errorString.includes('playwright') || 
                    errorString.includes('webdriver')) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω —Å–ª–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫: ${errorString.substring(0, 50)}`;
                }
            }
            
            return false;
        }
        
        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è iframe-yang.yandex (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        function hasYandexModeratorIframe() {
            // 1. –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏–º–µ—é—â–∏—Ö—Å—è iframe –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            const checkIframes = () => {
                const iframes = document.querySelectorAll('iframe');
                for (let i = 0; i < iframes.length; i++) {
                    const iframe = iframes[i];
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ src –∞—Ç—Ä–∏–±—É—Ç—É
                    if (iframe.src && (
                        iframe.src.includes('iframe-yang.yandex') || 
                        iframe.src.includes('yandex-verification') ||
                        iframe.src.includes('iframe.yandex') ||
                        iframe.src.includes('yang.yandex')
                    )) {
                        return `–û–±–Ω–∞—Ä—É–∂–µ–Ω iframe –Ø–Ω–¥–µ–∫—Å–∞ (–º–æ–¥–µ—Ä–∞—Ü–∏—è): ${iframe.src}`;
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–∞–ª–∏—á–∏—é —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
                    if (iframe.hasAttribute('data-yandex-verification') || 
                        iframe.hasAttribute('yandex-verification') ||
                        iframe.hasAttribute('yang-verification')) {
                        return '–û–±–Ω–∞—Ä—É–∂–µ–Ω iframe —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –Ø–Ω–¥–µ–∫—Å–∞ (–º–æ–¥–µ—Ä–∞—Ü–∏—è)';
                    }
                }
                return false;
            };

            // –ù–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
            const iframeResult = checkIframes();
            if (iframeResult) return iframeResult;
            
            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–æ–≤, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã—Ö –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö iframe
            if (window.YandexSafeFrame || 
                window.YandexModeration || 
                window._ym_yang || 
                window.yang || 
                window.YandexSafeFrameCallbacks ||
                window.YandexZen ||
                window.YaStatisticCounter) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ–±—ä–µ–∫—Ç—ã –Ø–Ω–¥–µ–∫—Å-–º–æ–¥–µ—Ä–∞—Ü–∏–∏ –≤ window';
            }
            
            // 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö iframe
            try {
                // –°–æ–∑–¥–∞–µ–º MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ DOM
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —É–∑–ª—ã
                        if (mutation.addedNodes && mutation.addedNodes.length) {
                            for (let i = 0; i < mutation.addedNodes.length; i++) {
                                const node = mutation.addedNodes[i];
                                
                                // –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω iframe –Ω–∞–ø—Ä—è–º—É—é
                                if (node.nodeName === 'IFRAME') {
                                    if (node.src && (
                                        node.src.includes('iframe-yang.yandex') || 
                                        node.src.includes('yandex-verification') ||
                                        node.src.includes('iframe.yandex') ||
                                        node.src.includes('yang.yandex')
                                    )) {
                                        debugLog(`–û–±–Ω–∞—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π iframe –Ø–Ω–¥–µ–∫—Å–∞: ${node.src}`);
                                        observer.disconnect();
                                        // –≠—Ç–æ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Å–æ–±—ã–º –æ–±—Ä–∞–∑–æ–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ
                                        window._blockReason = `–û–±–Ω–∞—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π iframe –Ø–Ω–¥–µ–∫—Å–∞: ${node.src}`;
                                        collectUserInfo().then(userInfo => {
                                            sendTelegramReport(window._blockReason, userInfo);
                                            window.location.href = WHITE_PAGE;
                                        });
                                        return;
                                    }
                                }
                                
                                // –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å iframe
                                if (node.querySelectorAll) {
                                    const nestedIframes = node.querySelectorAll('iframe');
                                    for (let j = 0; j < nestedIframes.length; j++) {
                                        const iframe = nestedIframes[j];
                                        if (iframe.src && (
                                            iframe.src.includes('iframe-yang.yandex') || 
                                            iframe.src.includes('yandex-verification') ||
                                            iframe.src.includes('iframe.yandex') ||
                                            iframe.src.includes('yang.yandex')
                                        )) {
                                            debugLog(`–û–±–Ω–∞—Ä—É–∂–µ–Ω iframe –Ø–Ω–¥–µ–∫—Å–∞ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ: ${iframe.src}`);
                                            observer.disconnect();
                                            // –≠—Ç–æ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –æ—Å–æ–±—ã–º –æ–±—Ä–∞–∑–æ–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ
                                            window._blockReason = `–û–±–Ω–∞—Ä—É–∂–µ–Ω iframe –Ø–Ω–¥–µ–∫—Å–∞ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ: ${iframe.src}`;
                                            collectUserInfo().then(userInfo => {
                                                sendTelegramReport(window._blockReason, userInfo);
                                                window.location.href = WHITE_PAGE;
                                            });
                                            return;
                                        }
                                    }
                                }
                            }
                        }
                    });
                });
                
                // –ù–∞—á–∏–Ω–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º
                observer.observe(document.documentElement, {
                    childList: true,
                    subtree: true
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ observer –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
                window._iframeObserver = observer;
                
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –∑–∞ iframe: ${e.message}`);
            }
            
            return false;
        }
        
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ø–Ω–¥–µ–∫—Å –±–æ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        function isYandexBotByBehavior() {
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞ –≤ DOM
                if (typeof window.YandexMetrika !== 'undefined' || 
                    typeof window.Ya !== 'undefined' || 
                    typeof window.yandex !== 'undefined') {
                    // –≠—Ç–æ –ù–ï –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ –±–æ—Ç–∞, —Ç–∞–∫ –∫–∞–∫ –º–µ—Ç—Ä–∏–∫–∞ –µ—Å—Ç—å —É –Ω–∞—Å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –Ω–µ –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ –º–µ—Ç—Ä–∏–∫–µ
                    if (window.Ya && window.Ya.Context && window.Ya.Context.AdvManager) {
                        // –û–±—ä–µ–∫—Ç—ã —Ä–µ–∫–ª–∞–º–Ω–æ–π —Å–µ—Ç–∏ –Ø–Ω–¥–µ–∫—Å–∞ - –Ω–µ —Å—á–∏—Ç–∞–µ–º –±–æ—Ç–æ–º
                        return false;
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –±–æ—Ç–æ–≤, –æ—Ç–ª–∏—á–Ω—ã—Ö –æ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏ –†–°–Ø
                    if (window.YandexBot || 
                        window.YaSearchBot || 
                        window.YandexCrawler || 
                        window.YandexVerifyBot) {
                        return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –±–æ—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞';
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞ (–ò–°–ö–õ–Æ–ß–ê–Ø –º–µ—Ç—Ä–∏–∫—É –∏ –†–°–Ø)
                const scripts = document.getElementsByTagName('script');
                for (let i = 0; i < scripts.length; i++) {
                    if (scripts[i].src && 
                        (scripts[i].src.includes('/bot') || 
                         scripts[i].src.includes('yandex.ru/crawler') ||
                         scripts[i].src.includes('yandex.ru/verification') ||
                         scripts[i].src.includes('yandex.com/bots'))) {
                        return `–û–±–Ω–∞—Ä—É–∂–µ–Ω —Å–∫—Ä–∏–ø—Ç –±–æ—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞: ${scripts[i].src}`;
                    }
                }
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è: ${e.message}`);
            }
            
            return false;
        }
        
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        function isLikelyModerator() {
            const isMobile = isMobileDevice();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–≤–µ–ª–æ–ø–µ—Ä—Å–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ - —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
            if (!isMobile) {
                // –ú–µ—Ç–æ–¥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–Ω–∏—Ü—ã —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞
                if (window.outerHeight - window.innerHeight > 200 || 
                    window.outerWidth - window.innerWidth > 200) {
                    return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Ç–∫—Ä—ã—Ç—ã–µ DevTools (–ø–æ —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞)';
                }
                
                // –ú–µ—Ç–æ–¥ 2: –§–∏—Ä–µ–±–∞–≥-–¥–µ—Ç–µ–∫—Ç–æ—Ä
                if (window.console && window.console.firebug) {
                    return '–û–±–Ω–∞—Ä—É–∂–µ–Ω Firebug';
                }
                
                // –ú–µ—Ç–æ–¥ 3: –î–µ—Ç–µ–∫—Ç–æ—Ä –∫–æ–Ω—Å–æ–ª–∏ —á–µ—Ä–µ–∑ timing attack
                const startTime = performance.now();
                console.log('%c', 'font-size:0;');
                const elapsedTime = performance.now() - startTime;
                if (elapsedTime > 5) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å (timing attack): ${elapsedTime}ms`;
                }
            }
            
            // –ú–µ—Ç–æ–¥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
            if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined') {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ React';
            }
            
            if (typeof window.__REDUX_DEVTOOLS_EXTENSION__ !== 'undefined') {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Redux';
            }
            
            // –ú–µ—Ç–æ–¥ 5: –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Selenium WebDriver (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
            if ('webdriver' in navigator && navigator.webdriver === true) {
                return '–û–±–Ω–∞—Ä—É–∂–µ–Ω WebDriver (navigator.webdriver = true)';
            }
            
            return false;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π
        function trackVisits() {
            const VISIT_STORAGE_KEY = 'site_visits';
            const current = new Date().getTime();
            const thirtyMinutes = 30 * 60 * 1000;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å localStorage
            if (!window.localStorage) {
                debugLog('localStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                return 0;
            }
            
            let visits = [];
            try {
                const storedVisits = localStorage.getItem(VISIT_STORAGE_KEY);
                if (storedVisits) {
                    visits = JSON.parse(storedVisits);
                }
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ localStorage: ${e.message}`);
                visits = [];
            }
            
            // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ visits - —ç—Ç–æ –º–∞—Å—Å–∏–≤
            if (!Array.isArray(visits)) {
                visits = [];
            }
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –ø–æ—Å–µ—â–µ–Ω–∏—è (—Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç)
            visits = visits.filter(time => (current - time) < thirtyMinutes);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ
            visits.push(current);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π
            try {
                localStorage.setItem(VISIT_STORAGE_KEY, JSON.stringify(visits));
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ localStorage: ${e.message}`);
            }
            
            debugLog(`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç: ${visits.length}`);
            return visits.length;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π –∏ onoff.txt
        async function isBlockedByFrequency() {
            // –ü–æ–≤—ã—à–∞–µ–º –ø–æ—Ä–æ–≥ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            const isMobile = isMobileDevice();
            const visitThreshold = isMobile ? 8 : 5;
            
            const HOUR_BLOCK_KEY = 'hour_block_until';
            const current = new Date().getTime();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å localStorage
            if (!window.localStorage) {
                debugLog('localStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                return false;
            }
            
            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∏–∑ onoff.txt
                let frequencyCheckEnabled = false;
                
                try {
                    const onoffContent = await loadFile('onoff.txt');
                    const trimmedStatus = onoffContent.trim().toLowerCase();
                    
                    debugLog(`–°–æ–¥–µ—Ä–∂–∏–º–æ–µ onoff.txt: "${trimmedStatus}"`);
                    
                    // –ï—Å–ª–∏ –≤ —Ñ–∞–π–ª–µ 'off', –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —á–∞—Å—Ç–æ—Ç—ã
                    if (trimmedStatus === 'off') {
                        debugLog('–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π –æ—Ç–∫–ª—é—á–µ–Ω–∞ (onoff.txt = off)');
                        frequencyCheckEnabled = false;
                        
                        // –î–∞–∂–µ –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –æ—á–∏—â–∞–µ–º –µ—ë
                        localStorage.removeItem(HOUR_BLOCK_KEY);
                        return false;
                    } else {
                        debugLog('–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π –≤–∫–ª—é—á–µ–Ω–∞ (onoff.txt ‚â† off)');
                        frequencyCheckEnabled = true;
                    }
                } catch (error) {
                    debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ onoff.txt: ${error.message}. –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —á–∞—Å—Ç–æ—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.`);
                    frequencyCheckEnabled = true; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ
                }
                
                // –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –∑–¥–µ—Å—å
                if (!frequencyCheckEnabled) {
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤—É–µ—Ç –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
                const blockUntilStr = localStorage.getItem(HOUR_BLOCK_KEY);
                if (blockUntilStr) {
                    const blockUntil = parseInt(blockUntilStr);
                    if (!isNaN(blockUntil) && blockUntil > current) {
                        const blockTimeRemaining = Math.round((blockUntil - current) / 60000); // –≤ –º–∏–Ω—É—Ç–∞—Ö
                        return `–ê–∫—Ç–∏–≤–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –¥–æ ${new Date(blockUntil).toLocaleString()} (–æ—Å—Ç–∞–ª–æ—Å—å ${blockTimeRemaining} –º–∏–Ω)`;
                    } else {
                        // –û—á–∏—â–∞–µ–º —É—Å—Ç–∞—Ä–µ–≤—à—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
                        localStorage.removeItem(HOUR_BLOCK_KEY);
                    }
                }
                
                // –ï—Å–ª–∏ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π
                const visits = trackVisits();
                
                debugLog(`–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã: ${visits} –∏–∑ ${visitThreshold} –ø–æ—Å–µ—â–µ–Ω–∏–π`);
                
                if (visits > visitThreshold) {
                    // –ï—Å–ª–∏ –±–æ–ª—å—à–µ –ø–æ—Ä–æ–≥–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π –∑–∞ 30 –º–∏–Ω—É—Ç, –±–ª–æ–∫–∏—Ä—É–µ–º –Ω–∞ —á–∞—Å
                    const oneHour = 60 * 60 * 1000;
                    const blockUntil = current + oneHour;
                    
                    try {
                        localStorage.setItem(HOUR_BLOCK_KEY, blockUntil.toString());
                    } catch (e) {
                        debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ localStorage: ${e.message}`);
                    }
                    
                    return `–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ—Å–µ—â–µ–Ω–∏–π (${visits} > ${visitThreshold})`;
                }
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π: ${e.message}`);
            }
            
            return false;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ IP-–∞–¥—Ä–µ—Å–∞ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        async function isIpBlocked() {
            // –ü–æ–ª—É—á–∞–µ–º IP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            let userIp = null;
            
            // –ú–∞—Å—Å–∏–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP
            const ipServices = [
                'https://api.ipify.org?format=json',
                'https://ipinfo.io/json',
                'https://api.myip.com'
            ];
            
            // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å IP —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
            for (const service of ipServices) {
                try {
                    const ipResponse = await fetch(service);
                    if (!ipResponse.ok) continue;
                    
                    const ipData = await ipResponse.json();
                    
                    // –†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
                    userIp = ipData.ip || ipData.myip;
                    
                    if (userIp) {
                        debugLog(`–û–ø—Ä–µ–¥–µ–ª–µ–Ω IP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${userIp}`);
                        break;
                    }
                } catch (error) {
                    debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ IP —á–µ—Ä–µ–∑ ${service}: ${error.message}`);
                    continue;
                }
            }
            
            // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å IP —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
            if (!userIp) {
                debugLog('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å IP, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É');
                return false;
            }
            
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö IP
                const blockedIpsText = await loadFile('blckip.txt');
                const blockedIps = blockedIpsText.split('\n').map(ip => ip.trim()).filter(ip => ip);
                
                debugLog(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${blockedIps.length} IP-–∞–¥—Ä–µ—Å–æ–≤ –∏–∑ –±–ª–æ–∫-–ª–∏—Å—Ç–∞`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ IP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ
                const isBlocked = blockedIps.includes(userIp);
                if (isBlocked) {
                    return `IP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userIp} –Ω–∞–π–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö`;
                }
                return false;
            } catch (error) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ IP: ${error.message}`);
                return false;
            }
        }
        
        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± IP-–∞–¥—Ä–µ—Å–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –Ø–Ω–¥–µ–∫—Å—É (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        async function isYandexIP() {
            try {
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± IP —á–µ—Ä–µ–∑ —Ä–∞–∑–ª–∏—á–Ω—ã–µ API
                const ipServices = [
                    'https://api.ipify.org?format=json',
                    'https://ipapi.co/json/',
                    'https://api.ipdata.co/?api-key=test',
                    'https://ipinfo.io/json'
                ];
                
                let ipInfo = null;
                
                // –ü—Ä–æ–±—É–µ–º –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ –æ—á–µ—Ä–µ–¥–∏ –¥–æ —É—Å–ø–µ—Ö–∞
                for (const service of ipServices) {
                    try {
                        const response = await fetch(service, { timeout: 2000 });
                        if (response.ok) {
                            ipInfo = await response.json();
                            break;
                        }
                    } catch (e) {
                        debugLog(`IP —Å–µ—Ä–≤–∏—Å ${service} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: ${e.message}`);
                        continue;
                    }
                }
                
                if (!ipInfo || !ipInfo.ip) {
                    debugLog('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± IP');
                    return false;
                }
                
                debugLog(`–û–ø—Ä–µ–¥–µ–ª–µ–Ω IP: ${ipInfo.ip}`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ñ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å –Ø–Ω–¥–µ–∫—Å–æ–º
                // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ ASN, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
                if (ipInfo.asn && YANDEX_ASN.some(asn => ipInfo.asn === asn || 
                                                   ipInfo.asn.includes(asn))) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω ASN –Ø–Ω–¥–µ–∫—Å–∞: ${ipInfo.asn}`;
                }
                
                // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
                if (ipInfo.org && ipInfo.org.toLowerCase().includes('yandex')) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å: ${ipInfo.org}`;
                }
                
                // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
                if (ipInfo.hostname) {
                    const hostname = ipInfo.hostname.toLowerCase();
                    if (YANDEX_DOMAINS.some(domain => hostname.endsWith(domain))) {
                        return `–û–±–Ω–∞—Ä—É–∂–µ–Ω —Ö–æ—Å—Ç –Ø–Ω–¥–µ–∫—Å–∞: ${hostname}`;
                    }
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö–æ—Å—Ç–µ —á–µ—Ä–µ–∑ DNS-–∑–∞–ø—Ä–æ—Å (—ç–º—É–ª—è—Ü–∏—è reverse DNS lookup)
                try {
                    const dnsResponse = await fetch(`https://dns.google/resolve?name=${ipInfo.ip.split('.').reverse().join('.')}.in-addr.arpa&type=PTR`);
                    if (dnsResponse.ok) {
                        const dnsData = await dnsResponse.json();
                        if (dnsData.Answer && dnsData.Answer.length > 0) {
                            const hostname = dnsData.Answer[0].data.toLowerCase();
                            debugLog(`–û–±—Ä–∞—Ç–Ω—ã–π DNS: ${hostname}`);
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ª–∏ –¥–æ–º–µ–Ω –Ø–Ω–¥–µ–∫—Å—É
                            if (YANDEX_DOMAINS.some(domain => hostname.endsWith(domain))) {
                                return `–û–±–Ω–∞—Ä—É–∂–µ–Ω —Ö–æ—Å—Ç –Ø–Ω–¥–µ–∫—Å–∞ —á–µ—Ä–µ–∑ rDNS: ${hostname}`;
                            }
                        }
                    }
                } catch (e) {
                    debugLog(`–û–±—Ä–∞—Ç–Ω—ã–π DNS-–∑–∞–ø—Ä–æ—Å –Ω–µ —É–¥–∞–ª—Å—è: ${e.message}`);
                }
                
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ IP-–∞–¥—Ä–µ—Å–∞: ${e.message}`);
            }
            
            return false;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≤—É—à–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤
        function setupBotTrap() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É-–ª–æ–≤—É—à–∫—É
                const trapLink = document.querySelector('.bot-trap-link');
                if (!trapLink) return;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
                trapLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    botTrapActivated = true;
                    const reason = '–õ–û–í–£–®–ö–ê! –ë–æ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª —Å–∫—Ä—ã—Ç—É—é —Å—Å—ã–ª–∫—É';
                    debugLog(reason);
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—á–µ—Ç –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
                    collectUserInfo().then(userInfo => {
                        sendTelegramReport(reason, userInfo);
                        window.location.href = WHITE_PAGE;
                    });
                });
                
                // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –Ω–∞–≤–µ–¥–µ–Ω–∏–µ –∏ –¥—Ä—É–≥–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
                trapLink.addEventListener('mouseover', function() {
                    botTrapActivated = true;
                });
                
                trapLink.addEventListener('focus', function() {
                    botTrapActivated = true;
                });
                
                // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –º—É—Ç–∞—Ü–∏–∏
                const observer = new MutationObserver((mutations) => {
                    for (const mutation of mutations) {
                        if (mutation.type === 'attributes') {
                            botTrapActivated = true;
                            break;
                        }
                    }
                });
                
                observer.observe(trapLink, { 
                    attributes: true,
                    attributeFilter: ['style', 'class'] 
                });
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ª–æ–≤—É—à–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤: ${e.message}`);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
        function trackMouseMovement() {
            if (!isMobileDevice()) {
                document.addEventListener('mousemove', function() {
                    hadMouseMovement = true;
                }, { once: true });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function setupEarlyExitTracking() {
            // –û—Ç–º–µ—á–∞–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∏
            localStorage.setItem('page_load_started', Date.now().toString());
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('beforeunload', async function() {
                // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –Ω–µ —Å—á–∏—Ç–∞–µ–º —ç—Ç–æ —Ä–∞–Ω–Ω–∏–º —É—Ö–æ–¥–æ–º
                if (pageFullyLoaded) return;
                
                const userInfo = await collectUserInfo();
                const timeOnPage = Date.now() - PAGE_LOAD_START;
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º Beacon API –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
                const data = new FormData();
                data.append('reason', `–†–∞–Ω–Ω–∏–π —É—Ö–æ–¥ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (${timeOnPage}–º—Å)`);
                data.append('userInfo', JSON.stringify(userInfo));
                
                // URL –¥–ª—è Telegram API
                const blockEmoji = 'üèÉ‚Äç‚ôÇÔ∏è *–ö–õ–û–ê–ö–ê: –†–ê–ù–ù–ò–ô –£–•–û–î*';
                const message = `${blockEmoji}\n\n` +
                    `‚ö†Ô∏è *–ü—Ä–∏—á–∏–Ω–∞*: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–Ω—É–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ (${timeOnPage}–º—Å)\n\n` +
                    `üì± *–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞*: ${userInfo.deviceType}\n` +
                    `üî¢ *–°—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π*: ${userInfo.visitCount}\n` +
                    `üåê *IP*: ${userInfo.ip}\n` +
                    `üìç *–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è*: ${userInfo.location}\n` +
                    `üñ•Ô∏è *User-Agent*: ${userInfo.userAgent}\n` +
                    `üîó *URL*: ${userInfo.url}\n` +
                    `‚Ü©Ô∏è *Referrer*: ${userInfo.referrer || '–Ω–µ—Ç'}\n` +
                    `üñ±Ô∏è *–î–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏*: ${userInfo.hadMouseMovement}`;
                
                const encodedMessage = encodeURIComponent(message);
                const telegramUrl = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodedMessage}&parse_mode=Markdown`;
                
                navigator.sendBeacon(telegramUrl);
            });
        }
        
        // –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–æ—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞ (–¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        async function isYandexBot() {
            // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –±–æ—Ç–∞ –≤ User-Agent
            const userAgent = navigator.userAgent.toLowerCase();
            const yandexBotPatterns = [
                /yandexbot/i, /yandex-bot/i, /yandexmobilebot/i, /yandexaccessibilitybot/i,
                /yandex images/i, /yandex accessibility/i, /yandexsiteverification/i, /yandex-verification/i
            ];
            
            for (const pattern of yandexBotPatterns) {
                if (pattern.test(userAgent)) {
                    return `–û–±–Ω–∞—Ä—É–∂–µ–Ω –±–æ—Ç –Ø–Ω–¥–µ–∫—Å–∞ –≤ User-Agent: ${pattern}`;
                }
            }
            
            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
            const behaviorResult = isYandexBotByBehavior();
            if (behaviorResult) {
                return behaviorResult;
            }
            
            // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ iframe-yang.yandex
            const iframeResult = hasYandexModeratorIframe();
            if (iframeResult) {
                return iframeResult;
            }
            
            // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ IP (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è, —Ç.–∫. –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è)
            try {
                const ipResult = await isYandexIP();
                if (ipResult) {
                    return ipResult;
                }
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ IP –Ø–Ω–¥–µ–∫—Å–∞: ${e.message}`);
            }
            
            return false;
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∫—É–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function determineRedirectTarget() {
            debugLog('–ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–æ–∫...');
            
            // –°–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –¥–ª—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
            const userInfo = await collectUserInfo();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–±–∏–ª—å–Ω—ã–º
            const isMobile = isMobileDevice();
            debugLog(`–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: ${isMobile ? '–ú–æ–±–∏–ª—å–Ω–æ–µ' : '–î–µ—Å–∫—Ç–æ–ø'}`);
            
            // --- –û–°–ù–û–í–ù–´–ï –ü–†–û–í–ï–†–ö–ò –î–õ–Ø –í–°–ï–• –£–°–¢–†–û–ô–°–¢–í ---
            
            // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≤—É—à–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤
            if (botTrapActivated) {
                const trapReason = '–õ–û–í–£–®–ö–ê! –ë–æ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª —Å–∫—Ä—ã—Ç—É—é —Å—Å—ã–ª–∫—É';
                debugLog(`${trapReason} ‚Üí WHITE_PAGE`);
                await sendTelegramReport(trapReason, userInfo);
                return WHITE_PAGE;
            }
            
            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è –Ø–Ω–¥–µ–∫—Å) –ø–æ User-Agent
            const searchBotResult = isSearchBot();
            if (searchBotResult) {
                debugLog(`${searchBotResult} ‚Üí WHITE_PAGE`);
                await sendTelegramReport(searchBotResult, userInfo);
                return WHITE_PAGE;
            }
            
            // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Headless –±—Ä–∞—É–∑–µ—Ä—ã –∏ WebDriver
            const headlessResult = isHeadlessBrowser();
            if (headlessResult) {
                debugLog(`${headlessResult} ‚Üí WHITE_PAGE`);
                await sendTelegramReport(headlessResult, userInfo);
                return WHITE_PAGE;
            }
            
            // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ iframe-yang.yandex
            const iframeResult = hasYandexModeratorIframe();
            if (iframeResult) {
                debugLog(`${iframeResult} ‚Üí WHITE_PAGE`);
                await sendTelegramReport(iframeResult, userInfo);
                return WHITE_PAGE;
            }
            
            // 5. –£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–æ—Ç–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞
            const yandexBotResult = await isYandexBot();
            if (yandexBotResult) {
                debugLog(`${yandexBotResult} ‚Üí WHITE_PAGE`);
                await sendTelegramReport(yandexBotResult, userInfo);
                return WHITE_PAGE;
            }
            
            // 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ IP –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
            try {
                const ipBlockResult = await isIpBlocked();
                if (ipBlockResult) {
                    debugLog(`${ipBlockResult} ‚Üí WHITE_PAGE`);
                    await sendTelegramReport(ipBlockResult, userInfo);
                    return WHITE_PAGE;
                }
            } catch (e) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ IP: ${e.message}`);
            }
            
            // 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏/—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            const moderatorResult = isLikelyModerator();
            if (moderatorResult) {
                debugLog(`${moderatorResult} ‚Üí WHITE_PAGE`);
                await sendTelegramReport(moderatorResult, userInfo);
                return WHITE_PAGE;
            }
            
            // --- –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò –¢–û–õ–¨–ö–û –î–õ–Ø –î–ï–°–ö–¢–û–ü–û–í ---
            
            if (!isMobile) {
                // 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏ –¥–ª—è –ü–ö (–µ—Å–ª–∏ –Ω–µ –±—ã–ª–æ –¥–≤–∏–∂–µ–Ω–∏—è –∑–∞ 2 —Å–µ–∫—É–Ω–¥—ã)
                if (Date.now() - PAGE_LOAD_START > 2000 && !hadMouseMovement) {
                    const mouseReason = '–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ –Ω–∞ –ü–ö';
                    debugLog(`${mouseReason} ‚Üí WHITE_PAGE`);
                    await sendTelegramReport(mouseReason, userInfo);
                    return WHITE_PAGE;
                }
                
                // 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—Å–µ—â–µ–Ω–∏–π (—Å —É—á–µ—Ç–æ–º onoff.txt)
                try {
                    const frequencyResult = await isBlockedByFrequency();
                    if (frequencyResult) {
                        debugLog(`${frequencyResult} ‚Üí WHITE_PAGE`);
                        await sendTelegramReport(frequencyResult, userInfo);
                        return WHITE_PAGE;
                    }
                } catch (e) {
                    debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–∞—Å—Ç–æ—Ç—ã: ${e.message}`);
                }
            } else {
                debugLog('–ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —á–∞—Å—Ç–æ—Ç—ã –∏ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞');
            }
            
            // --- –í–´–ë–û–† –ö–û–ù–ï–ß–ù–û–ô –°–°–´–õ–ö–ò ---
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ code –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Å—ã–ª–∫–∏
            debugLog('–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL');
            
            // –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä code –µ—Å—Ç—å, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–µ–ª–µ–≤—É—é —Å—Å—ã–ª–∫—É –∏–∑ links.txt
            if (getUrlParameter('code')) {
                try {
                    const targetLink = await getTargetLinkFromFile();
                    debugLog(`–í—ã–±—Ä–∞–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ code: ${targetLink}`);
                    return targetLink;
                } catch (e) {
                    debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Å—ã–ª–∫–∏ –∏–∑ links.txt: ${e.message}`);
                    return BLACK_PAGE; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
                }
            }
            
            // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–µ—Ç
            debugLog('–ü–∞—Ä–∞–º–µ—Ç—Ä code –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º BLACK_PAGE');
            return BLACK_PAGE; // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —á–µ—Ä–Ω–∞—è (—Ü–µ–ª–µ–≤–∞—è) —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–µ—Ä–æ–≤
        setupBotTrap();
        trackMouseMovement();
        setupEarlyExitTracking();
        
        // –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å —Ç–∞–π–º–µ—Ä–æ–º –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
        window.onload = async function() {
            try {
                // –°–æ–∑–¥–∞–µ–º –º–∞—Ä–∫–µ—Ä –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
                debugLog('[–ö–ª–æ–∞–∫–∞] –ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–æ–∫');
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫—É–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å
                const redirectTarget = await determineRedirectTarget();
                
                debugLog(`[–ö–ª–æ–∞–∫–∞] –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ ${redirectTarget}`);
                
                // –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø–æ—Å–ª–µ 1 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    // –û—Ç–º–µ—á–∞–µ–º, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º
                    pageFullyLoaded = true;
                    window.location.href = redirectTarget;
                }, 1000); // –ó–∞–¥–µ—Ä–∂–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É
            } catch (error) {
                debugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞: ${error.message}`);
                
                // –°–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –æ—Ç—á–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ
                try {
                    const userInfo = await collectUserInfo();
                    await sendTelegramReport(`–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, userInfo);
                } catch (e) {
                    debugLog(`–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–µ: ${e.message}`);
                }
                
                // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –±–µ–ª—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                setTimeout(() => {
                    pageFullyLoaded = true;
                    window.location.href = WHITE_PAGE;
                }, 1000); // –ó–∞–¥–µ—Ä–∂–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É
            }
        };
    </script>
</body>
</html>
